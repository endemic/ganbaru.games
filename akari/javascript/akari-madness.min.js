Arcadia.isLocked=function(){return void 0!==window.store&&!1===localStorage.getBoolean("unlocked")},Arcadia.cycleBackground=function(){var t=["red","green","purple","blue","teal","grey","maroon"],i=parseInt(localStorage.getItem("currentColorIndex"),10)||0;return t.length<=(i+=1)&&(i=0),localStorage.setItem("currentColorIndex",i),document.body.style["background-color"]=t[i],Cell.LIGHT_COLOR=t[i],t[i]},Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i,e=Object(this),o=e.length>>>0,n=arguments[1],s=0;s<o;s++)if(i=e[s],t.call(n,i,s,e))return i}),String.prototype.capitalize||(String.prototype.capitalize=function(){return this[0].toUpperCase()+this.substring(1)}),function(){Storage.namespace="akari";var i=Storage.prototype.getItem,e=Storage.prototype.setItem;Storage.prototype.setItem=function(t,i){return t=this.namespace(t),e.apply(this,arguments)},Storage.prototype.getItem=function(t){return t=this.namespace(t),i.apply(this,arguments)},Storage.prototype.namespace=function(t){return Storage.namespace+":"+t},Storage.prototype.setObject=function(t,i){this.setItem(t,JSON.stringify(i))},Storage.prototype.getObject=function(t){t=this.getItem(t);return t?JSON.parse(t):null},Storage.prototype.setBoolean=function(t,i){this.setItem(t,!!i)},Storage.prototype.getBoolean=function(t){return"true"==this.getItem(t)}}(),function(t){"use strict";var i=function(){Arcadia.Shape.apply(this,arguments),this.size={width:Grid.CELL_WIDTH,height:Grid.CELL_HEIGHT},this.vertices=4,this.color=i.DEFAULT_COLOR,this.border="1px black",this.status=i.STATUS.EMPTY,this.lightSources=0,this.icon=new Arcadia.Shape({size:{width:this.size.width/2,height:this.size.height/2},color:"black"}),this.add(this.icon),this.deactivate(this.icon),this.label=new Arcadia.Label({font:"24px monospace",text:this.number}),this.add(this.label),this.deactivate(this.label)};i.prototype=new Arcadia.Shape,i.STATUS={EMPTY:0,LIGHT:2,FLAG:3,HINT:4},i.DEFAULT_COLOR="white",i.LIGHT_COLOR="yellow",i.HINT_COLOR="black",i.prototype.incrementLightSources=function(){this.lightSources+=1,1===this.lightSources&&(this.color=i.LIGHT_COLOR)},i.prototype.decrementLightSources=function(){--this.lightSources,this.lightSources<=0&&(this.lightSources=0,this.color=i.DEFAULT_COLOR)},i.prototype.convertToLight=function(){this.status=i.STATUS.LIGHT,this.activate(this.icon),this.icon.vertices=0},i.prototype.convertToFlag=function(){this.status=i.STATUS.FLAG,this.icon.vertices=4},i.prototype.convertToEmpty=function(){this.number=null,this.color=i.DEFAULT_COLOR,0<this.lightSources&&(this.color=i.LIGHT_COLOR),this.status=i.STATUS.EMPTY,this.deactivate(this.icon),this.deactivate(this.label)},i.prototype.convertToHint=function(t){this.number=Number.isInteger(t)?t:null,this.color=i.HINT_COLOR,this.status=i.STATUS.HINT,null!==this.number&&(this.label.text=this.number,this.activate(this.label))},i.prototype.reset=function(){this.lightSources=0,this.convertToEmpty()},t.Cell=i}(window),function(t){"use strict";var a=function(t){for(Arcadia.Shape.apply(this,arguments),this.data=t.data||{size:10,hints:[]},this.size={width:a.CELL_WIDTH*this.data.size,height:a.CELL_HEIGHT*this.data.size},this.color=null,this.border="2px black",this.mode=a.MODES.PLAY,this.calculateBounds(),this.cells=[];this.cells.length<Math.pow(this.data.size,2);){var i=this.cells.length%this.data.size,e=Math.floor(this.cells.length/this.data.size),e=new Cell({position:{x:-this.size.width/2+i*a.CELL_WIDTH+a.CELL_WIDTH/2,y:-this.size.height/2+e*a.CELL_HEIGHT+a.CELL_HEIGHT/2}});this.add(e),this.cells.push(e)}this.data.hints.forEach(function(t){var i=t.position.x,e=t.position.y,i=this.data.size*e+i;this.cells[i].convertToHint(t.number)}.bind(this))};a.prototype=new Arcadia.Shape,a.MAX_SIZE=10,a.MIN_SIZE=5,a.MAX_WIDTH=a.MAX_HEIGHT=372,a.CELL_WIDTH=a.MAX_WIDTH/10,a.CELL_HEIGHT=a.MAX_HEIGHT/10,a.MODES={PLAY:"play",EDIT:"edit"},a.prototype.containsPoint=function(t){return t.x<this.bounds.right&&t.x>this.bounds.left&&t.y<this.bounds.bottom&&t.y>this.bounds.top},a.prototype.getRowAndColumn=function(t){return this.containsPoint(t)?[Math.floor((t.y-this.bounds.top)/a.CELL_WIDTH),Math.floor((t.x-this.bounds.left)/a.CELL_HEIGHT)]:[null,null]},a.prototype.calculateBounds=function(){var t=this.size.width/2,i=this.size.height/2;this.bounds={right:t+this.position.x,left:t-a.CELL_WIDTH*this.data.size+this.position.x,bottom:i+this.position.y,top:i-a.CELL_HEIGHT*this.data.size+this.position.y}},a.prototype.resize=function(t){if(Number.isInteger(t)){for(this.data.size=t;this.cells.length<Math.pow(this.data.size,2);){var i=new Cell;this.add(i),this.cells.push(i)}this.size={width:a.CELL_WIDTH*this.data.size,height:a.CELL_HEIGHT*this.data.size},this.cells.forEach(function(t){this.deactivate(t)}.bind(this)),this.cells.forEach(function(t,i){var e;i>=Math.pow(this.data.size,2)||(this.activate(t),e=i%this.data.size,i=Math.floor(i/this.data.size),t.position={x:-this.size.width/2+e*a.CELL_WIDTH+a.CELL_WIDTH/2,y:-this.size.height/2+i*a.CELL_HEIGHT+a.CELL_HEIGHT/2})}.bind(this)),this.calculateBounds()}},a.prototype.onPointEnd=function(t){var t=this.getRowAndColumn(t[0]),i=t[0],t=t[1];if(null!==i&&null!==t){var e,o=this.data.size,n=i*o+t,s=this.cells[n];if(this.mode!==a.MODES.EDIT)switch(s.status){case Cell.STATUS.EMPTY:for(s.convertToLight(),e=n-1;i*o<=e&&this.cells[e].status!==Cell.STATUS.HINT;--e)this.cells[e].incrementLightSources();for(e=n+1;e<i*o+o&&this.cells[e].status!==Cell.STATUS.HINT;e+=1)this.cells[e].incrementLightSources();for(e=n-o;0<=e&&this.cells[e].status!==Cell.STATUS.HINT;e-=o)this.cells[e].incrementLightSources();for(e=n+o;e<Math.pow(o,2)&&this.cells[e].status!==Cell.STATUS.HINT;e+=o)this.cells[e].incrementLightSources();s.incrementLightSources();break;case Cell.STATUS.LIGHT:for(s.convertToFlag(),e=n-1;i*o<=e&&this.cells[e].status!==Cell.STATUS.HINT;--e)this.cells[e].decrementLightSources();for(e=n+1;e<i*o+o&&this.cells[e].status!==Cell.STATUS.HINT;e+=1)this.cells[e].decrementLightSources();for(e=n-o;0<=e&&this.cells[e].status!==Cell.STATUS.HINT;e-=o)this.cells[e].decrementLightSources();for(e=n+o;e<Math.pow(o,2)&&this.cells[e].status!==Cell.STATUS.HINT;e+=o)this.cells[e].decrementLightSources();s.decrementLightSources();break;case Cell.STATUS.FLAG:s.convertToEmpty();break;case Cell.STATUS.HINT:break;default:console.warn("Unknown cell status!",s.status)}else switch(s.status){case Cell.STATUS.EMPTY:s.convertToHint();break;case Cell.STATUS.HINT:4<=s.number?s.convertToEmpty():null!==s.number?s.convertToHint(s.number+1):s.convertToHint(0)}}},a.prototype.isComplete=function(){for(var t=this.data.size,i=0;i<this.cells.length;i+=1){var e=this.cells[i];if(e.status!==Cell.STATUS.HINT&&e.lightSources<1)return console.log("Cell ",i," is not lit"),!1;if(e.status===Cell.STATUS.LIGHT&&1<e.lightSources)return console.log("Cell ",i," has more than one light source"),!1;if(e.status===Cell.STATUS.HINT&&e.number){var o=i-t,n=i-1,s=i+1,a=i+t;o<0&&(o=null),a>=this.cells.length&&(a=null),Math.floor(n/t)!==Math.floor(i/t)&&(n=null),Math.floor(s/t)!==Math.floor(i/t)&&(s=null);var r=0;if([o,a,n,s].forEach(function(t){t&&this.cells[t].status===Cell.STATUS.LIGHT&&(r+=1)}.bind(this)),e.number!==r)return console.log("Cell ",i," has ",r," lights around it, but needs ",e.number),!1}}return!0},a.prototype.reset=function(){this.cells.forEach(function(t){t.status!==Cell.STATUS.HINT&&t.reset()})},t.Grid=a}(window),function(t){"use strict";var i=function(){Arcadia.Shape.apply(this,arguments),this.size={width:i.SIZE,height:i.SIZE},this.border="2px white",this.color=null,this.pixels=new Arcadia.Shape({size:{width:this.size.width,height:this.size.height}}),this.pixels.path=function(i){var e,o,n;this.hints&&(e=this.size.width/this.puzzleSize*Arcadia.PIXEL_RATIO,o=-this.size.width/2*Arcadia.PIXEL_RATIO,n=-this.size.height/2*Arcadia.PIXEL_RATIO,i.fillStyle="white",this.hints.forEach(function(t){t.position.x,t.position.y;i.fillRect(o+t.position.x*e,n+t.position.y*e,e,e)}))},this.add(this.pixels)};i.prototype=new Arcadia.Shape,i.SIZE=75,i.prototype.drawPreview=function(t,i){void 0!==PUZZLES[t]?(this.alpha<1&&(this.alpha=1),i?this.border="2px limegreen":Arcadia.isLocked()&&t>=Arcadia.FREE_LEVEL_COUNT?this.border="2px crimson":this.border="2px white",this.pixels.puzzleSize=PUZZLES[t].size,this.pixels.hints=PUZZLES[t].hints,this.pixels.dirty=!0):this.alpha=0},i.prototype.highlight=function(){this._border.width=5,this.dirty=!0,this.scale=1.1},i.prototype.lowlight=function(){this._border.width=2,this.dirty=!0,this.scale=1},t.Thumbnail=i}(window);var PUZZLES=[{size:5,hints:[{position:{x:0,y:0},number:2},{position:{x:2,y:3},number:2},{position:{x:4,y:4},number:1}]},{size:5,hints:[{position:{x:0,y:0},number:null},{position:{x:2,y:2},number:4},{position:{x:4,y:4},number:null}]},{size:5,hints:[{position:{x:3,y:0},number:3},{position:{x:0,y:3},number:1}]},{size:5,hints:[{position:{x:3,y:2},number:1},{position:{x:4,y:2},number:2},{position:{x:1,y:3},number:0}]},{size:5,hints:[{position:{x:1,y:1},number:3},{position:{x:3,y:2},number:null},{position:{x:0,y:4},number:1},{position:{x:4,y:4},number:1}]},{size:5,hints:[{position:{x:1,y:1},number:2},{position:{x:2,y:1},number:0},{position:{x:1,y:3},number:1},{position:{x:2,y:3},number:1}]},{size:5,hints:[{position:{x:0,y:0},number:2},{position:{x:2,y:3},number:2},{position:{x:4,y:4},number:1}]},{size:5,hints:[{position:{x:0,y:0},number:null},{position:{x:2,y:2},number:4},{position:{x:4,y:4},number:null}]},{size:5,hints:[{position:{x:3,y:0},number:3},{position:{x:0,y:3},number:1}]},{size:5,hints:[{position:{x:3,y:2},number:1},{position:{x:4,y:2},number:2},{position:{x:1,y:3},number:0}]},{size:5,hints:[{position:{x:1,y:1},number:3},{position:{x:3,y:2},number:null},{position:{x:0,y:4},number:1},{position:{x:4,y:4},number:1}]},{size:5,hints:[{position:{x:1,y:1},number:2},{position:{x:2,y:1},number:0},{position:{x:1,y:3},number:1},{position:{x:2,y:3},number:1}]},{size:5,hints:[{position:{x:1,y:1},number:3},{position:{x:3,y:2},number:null},{position:{x:1,y:3},number:2}]},{size:6,hints:[{position:{x:5,y:0},number:0},{position:{x:3,y:2},number:2},{position:{x:5,y:2},number:0},{position:{x:0,y:3},number:0},{position:{x:2,y:3},number:2},{position:{x:0,y:5},number:0}]},{size:6,hints:[{position:{x:1,y:0},number:null},{position:{x:1,y:1},number:0},{position:{x:3,y:2},number:2},{position:{x:1,y:4},number:null},{position:{x:2,y:4},number:0}]},{size:7,hints:[{position:{x:0,y:0},number:null},{position:{x:1,y:1},number:2},{position:{x:3,y:2},number:null},{position:{x:4,y:3},number:1},{position:{x:1,y:5},number:null},{position:{x:0,y:6},number:1}]},{size:7,hints:[{position:{x:2,y:1},number:null},{position:{x:5,y:1},number:0},{position:{x:2,y:2},number:null},{position:{x:2,y:3},number:null},{position:{x:3,y:3},number:2},{position:{x:5,y:5},number:0}]},{size:7,hints:[{position:{x:2,y:1},number:null},{position:{x:1,y:2},number:2},{position:{x:2,y:3},number:2},{position:{x:4,y:3},number:null},{position:{x:5,y:4},number:2},{position:{x:4,y:5},number:null}]},{size:7,hints:[{position:{x:1,y:1},number:null},{position:{x:3,y:3},number:3},{position:{x:4,y:3},number:1},{position:{x:1,y:5},number:null}]},{size:8,hints:[{position:{x:2,y:1},number:2},{position:{x:4,y:1},number:2},{position:{x:6,y:1},number:1},{position:{x:1,y:6},number:1},{position:{x:3,y:6},number:2},{position:{x:5,y:6},number:2}]},{size:8,hints:[{position:{x:3,y:1},number:2},{position:{x:2,y:2},number:1},{position:{x:3,y:2},number:0},{position:{x:6,y:4},number:null},{position:{x:7,y:4},number:1},{position:{x:2,y:5},number:1},{position:{x:2,y:6},number:1},{position:{x:1,y:7},number:null}]},{size:8,hints:[{position:{x:5,y:0},number:1},{position:{x:1,y:1},number:3},{position:{x:2,y:1},number:null},{position:{x:6,y:2},number:0},{position:{x:0,y:3},number:null},{position:{x:4,y:3},number:null},{position:{x:3,y:4},number:4},{position:{x:7,y:4},number:0},{position:{x:1,y:5},number:2},{position:{x:5,y:6},number:1},{position:{x:6,y:6},number:null},{position:{x:2,y:7},number:null}]},{size:8,hints:[{position:{x:5,y:0},number:1},{position:{x:1,y:1},number:3},{position:{x:2,y:1},number:null},{position:{x:6,y:2},number:0},{position:{x:0,y:3},number:null},{position:{x:4,y:3},number:null},{position:{x:3,y:4},number:4},{position:{x:7,y:4},number:0},{position:{x:1,y:5},number:2},{position:{x:5,y:6},number:1},{position:{x:6,y:6},number:null},{position:{x:2,y:7},number:null}]},{size:9,hints:[{position:{x:1,y:1},number:2},{position:{x:3,y:3},number:2},{position:{x:5,y:5},number:2},{position:{x:7,y:7},number:2}]}];localStorage.getObject("puzzles")||localStorage.setObject("puzzles",PUZZLES);var PUZZLES=localStorage.getObject("puzzles"),TUTORIALS=[];!function(t){"use strict";function i(){Arcadia.Scene.apply(this),Arcadia.cycleBackground();var t=new Arcadia.Label({text:"about",font:"64px monospace",position:{x:0,y:-200}});this.add(t),t=new Arcadia.Button({position:{x:-this.size.width/2+65,y:-this.size.height/2+25},size:{width:120,height:40},color:null,border:"2px white",text:"< title",font:"24px monospace",action:function(){sona.play("button"),Arcadia.changeScene(TitleScene)}}),this.add(t),t=new Arcadia.Label({text:["Programming by Nathan Demick","Puzzle concept by Nikoli","(c) 2016 Ganbaru Games","https://ganbarugames.com"].join("\n"),font:"20px monospace",position:{x:0,y:-75}}),this.add(t);var t=new Arcadia.Button({position:{x:0,y:60},size:{width:240,height:50},color:null,border:"2px white",text:"reset data",font:"36px monospace",action:function(){if(sona.play("button"),window.confirm("Reset all saved data?")){for(var t=[];t.length<PUZZLES.length;)t.push(null);localStorage.setObject("completedPuzzles",t)}}});this.add(t),Arcadia.ENV.cordova&&(t=new Arcadia.Button({position:{x:0,y:t.position.y+65},size:{width:240,height:50},color:null,border:"2px white",text:"feedback",font:"36px monospace",action:function(){window.sona.play("button"),window.open("itms-apps://itunes.apple.com/app/id1067169429")}}),this.add(t),t=new Arcadia.Button({position:{x:0,y:t.position.y+65},size:{width:240,height:50},color:null,border:"2px white",text:"more games",font:"36px monospace",action:function(){window.sona.play("button"),window.open("itms-apps://itunes.com/apps/ganbarugames")}}),this.add(t))}i.prototype=new Arcadia.Scene,t.AboutScene=i}(window),function(t){"use strict";function i(){Arcadia.Scene.apply(this,arguments),Arcadia.cycleBackground();var t=new Arcadia.Label({position:{x:0,y:-167},font:"48px monospace",text:"thanks\nfor\nplaying!"});this.add(t),t=["Programming by Nathan Demick","Puzzle concept by Nikoli","(c) 2011-2016 Ganbaru Games","https://ganbarugames.com"].join("\n"),t=new Arcadia.Label({position:{x:0,y:33},font:"20px monospace",text:t}),this.add(t),t=new Arcadia.Button({position:{x:0,y:200},color:null,border:"2px #fff",padding:15,text:"OK",font:"36px monospace",action:function(){sona.play("button"),Arcadia.changeScene(PuzzleSelectScene)}}),this.add(t)}i.prototype=new Arcadia.Scene,t.CreditsScene=i}(window),function(t){"use strict";function i(t){var i;Arcadia.Scene.apply(this),Arcadia.cycleBackground(),(t=t||{}).puzzleIndex&&(i=PUZZLES[t.puzzleIndex]),this.verticalPadding=70,this.grid=new Grid({data:i,position:{x:0,y:this.size.height/2-Grid.MAX_HEIGHT/2-this.verticalPadding}}),this.add(this.grid),this.drawUi()}(i.prototype=new Arcadia.Scene).save=function(){var t=localStorage.getObject("puzzles")||[],n={size:this.grid.data.size,hints:[]};this.grid.cells.forEach(function(t,i){var e,o=this.grid.data.size;i>=Math.pow(o,2)||t.status!==Cell.STATUS.HINT||(e=Math.floor(i/o),t=t.number,n.hints.push({position:{x:i%o,y:e},number:t}))}.bind(this)),t.push(n),localStorage.setObject("puzzles",t),console.log(JSON.stringify(n))},i.prototype.drawUi=function(){var t=Grid.MAX_WIDTH/2-10,i=new Arcadia.Button({color:null,border:"3px white",label:new Arcadia.Label({text:"smaller",font:"24px monospace"}),size:{width:t,height:40},position:{x:t/2+5,y:-this.size.height/2+20+this.verticalPadding},action:function(){sona.play("button");var t=this.grid.data.size;t>Grid.MIN_SIZE&&this.grid.resize(--t)}.bind(this)});this.add(i);var e=new Arcadia.Button({color:null,border:"3px white",label:new Arcadia.Label({text:"bigger",font:"24px monospace"}),size:{width:t,height:40},position:{x:-t/2-5,y:-this.size.height/2+20+this.verticalPadding},action:function(){sona.play("button");var t=this.grid.data.size;t<Grid.MAX_SIZE&&this.grid.resize(t+=1)}.bind(this)});this.add(e);var o=new Arcadia.Button({color:"rgba(255, 255, 255, 0.25)",border:"3px white",label:new Arcadia.Label({text:"play",font:"24px monospace"}),size:{width:t,height:40},position:{x:t/2+5,y:i.position.y+i.size.height+10},action:function(){sona.play("button"),o.color="rgba(255, 255, 255, 0.25)",n.color=null,this.grid.mode=Grid.MODES.PLAY}.bind(this)});this.add(o);var n=new Arcadia.Button({color:null,border:"3px white",label:new Arcadia.Label({text:"edit",font:"24px monospace"}),size:{width:t,height:40},position:{x:-t/2-5,y:e.position.y+e.size.height+10},action:function(){sona.play("button"),o.color=null,n.color="rgba(255, 255, 255, 0.25)",this.grid.mode=Grid.MODES.EDIT}.bind(this)});this.add(n);e=new Arcadia.Button({color:null,border:"3px white",label:new Arcadia.Label({text:"quit",font:"24px monospace"}),size:{width:t,height:40},position:{x:t/2+5,y:o.position.y+o.size.height+10},action:function(){sona.play("button"),Arcadia.changeScene(PuzzleSelectScene)}});this.add(e);t=new Arcadia.Button({color:null,border:"3px white",label:new Arcadia.Label({text:"save",font:"24px monospace"}),size:{width:t,height:40},position:{x:-t/2-5,y:n.position.y+n.size.height+10},action:function(){sona.play("button"),this.save()}.bind(this)});this.add(t)},t.EditorScene=i}(window),function(t){"use strict";function n(t){Arcadia.Scene.apply(this,arguments),t=t||{},Arcadia.cycleBackground(),this.level=t.level||0,localStorage.setItem("selectedLevel",this.level),this.levelData=PUZZLES[this.level],this.showTutorial=!!TUTORIALS[this.level],this.tutorialStep=0,this.timer=0,this.VERTICAL_PADDING=77,this.drawUi(),this.grid=new Grid({data:this.levelData,position:{x:0,y:this.size.height/2-Grid.MAX_HEIGHT/2-this.VERTICAL_PADDING}}),this.add(this.grid),this.showTutorial&&this.displayTutorial()}(n.prototype=new Arcadia.Scene).update=function(t){var i,e;Arcadia.Scene.prototype.update.call(this,t),this.gameOver||(this.timer+=t,t=(i=function(t,i){for(t=String(t),i=parseInt(i,10);t.length<i;)t="0"+t;return t})(Math.round(this.timer/60),2),i=i(Math.round(this.timer%60),2),this.timerLabel.text="Time\n"+t+":"+i,this.showTutorial&&(e=TUTORIALS[this.level].squares[this.tutorialStep],this.squares.find(function(t){return Math.round(t.position.x)===Math.round(e.position.x)&&Math.round(t.position.y)===Math.round(e.position.y)&&t.area===e.area})&&(this.tutorialStep+=1,this.displayTutorial())))},n.prototype.displayTutorial=function(){this.tutorialLabel.text=TUTORIALS[this.level].text[this.tutorialStep]||"";var t=TUTORIALS[this.level].hints[this.tutorialStep];t&&(this.hint.position=t.position,this.hint.size=t.size)},n.prototype.onPointStart=function(t){Arcadia.Scene.prototype.onPointStart.call(this,t),this.gameOver},n.prototype.onPointMove=function(t){Arcadia.Scene.prototype.onPointMove.call(this,t),this.gameOver},n.prototype.onPointEnd=function(t){Arcadia.Scene.prototype.onPointEnd.call(this,t),this.gameOver||this.grid.isComplete()&&this.win()},n.prototype.win=function(){this.gameOver=!0;for(var t=localStorage.getObject("completedPuzzles")||[];t.length<PUZZLES.length;)t.push(null);t[this.level]=!0,localStorage.setObject("completedPuzzles",t),window.setTimeout(function(){sona.play("win"),this.grid.tween("alpha",0,500),this.remove(this.hint),this.remove(this.tutorialLabelBackground),this.add(this.completeBackground),this.completeBackground.scale=0,window.setTimeout(function(){this.completeBackground.tween("scale",1,1e3,"expoOut")}.bind(this),250)}.bind(this),500)},n.prototype.drawUi=function(){var t=this,i=new Arcadia.Button({color:null,border:"2px white",text:"quit",font:"24px monospace",size:{width:Grid.MAX_WIDTH/2-5,height:40},action:function(){sona.play("button"),Arcadia.changeScene(PuzzleSelectScene)}});i.position={x:-i.size.width/2-5,y:-this.size.height/2+i.size.height/2+this.VERTICAL_PADDING},this.add(i);var e=new Arcadia.Button({color:null,border:"2px white",text:"reset",font:"24px monospace",size:{width:Grid.MAX_WIDTH/2-5,height:40},action:function(){sona.play("erase"),t.grid.reset()}});e.position={x:e.size.width/2+5,y:-this.size.height/2+e.size.height/2+this.VERTICAL_PADDING},this.add(e);var o=new Arcadia.Shape({color:null,border:"2px white",size:{width:Grid.MAX_WIDTH/2-5,height:80}});o.position={x:-o.size.width/2-5,y:e.position.y+e.size.height/2+o.size.height/2+10},this.add(o),this.areaLabel=new Arcadia.Label({color:"white",text:"Area\n--",font:"28px monospace"}),o.add(this.areaLabel);o=new Arcadia.Shape({color:null,border:"2px white",size:{width:Grid.MAX_WIDTH/2-5,height:80}});o.position={x:o.size.width/2+5,y:i.position.y+i.size.height/2+o.size.height/2+10},this.add(o),this.timerLabel=new Arcadia.Label({color:"white",text:"Time\n00:00",font:"28px monospace"}),o.add(this.timerLabel),this.showTutorial&&(this.tutorialLabelBackground=new Arcadia.Shape({color:null,border:"2px white",size:{width:Grid.MAX_WIDTH/1.5,height:110},position:{x:0,y:230}}),this.add(this.tutorialLabelBackground),this.tutorialLabel=new Arcadia.Label({color:"white",text:"Tutorial text goes here\nhow much text can\nfit in this box?\na lot apparently",font:"20px monospace"}),this.tutorialLabelBackground.add(this.tutorialLabel),this.hint=new Square,this.hint.blink(),this.add(this.hint)),this.completeBackground=new Arcadia.Shape({color:null,border:"2px white",size:{width:Grid.MAX_WIDTH/1.5,height:Grid.MAX_HEIGHT/1.5},position:{x:0,y:this.size.height/2-Grid.MAX_HEIGHT/2-this.VERTICAL_PADDING},enablePointEvents:!0}),this.completeBackground.add(new Arcadia.Label({font:"36px monospace",text:"complete!",position:{x:0,y:-75}})),this.completeBackground.add(new Arcadia.Button({color:null,border:"2px white",font:"36px monospace",text:"next >",padding:10,action:function(){sona.play("button");var t=(localStorage.getObject("completedPuzzles")||[]).indexOf(null);-1===t?Arcadia.changeScene(PuzzleSelectScene):Arcadia.isLocked()&&t>=Arcadia.FREE_LEVEL_COUNT?Arcadia.changeScene(UnlockScene):Arcadia.changeScene(n,{level:t})}})),this.completeBackground.add(new Arcadia.Button({color:null,border:"2px white",font:"36px monospace",text:"< back",padding:10,position:{x:0,y:75},action:function(){sona.play("button"),Arcadia.changeScene(PuzzleSelectScene)}}))},t.GameScene=n}(window),function(t){"use strict";var s=function(t){Arcadia.Scene.call(this,t),t=t||{};var o=this;for(Arcadia.cycleBackground(),this.selectedPuzzle=parseInt(localStorage.getItem("selectedPuzzle"),10)||t.puzzle||0,this.perPage=9,this.totalPages=Math.ceil(PUZZLES.length/this.perPage),this.currentPage=Math.floor(this.selectedPuzzle/this.perPage),this.completedPuzzles=localStorage.getObject("completedPuzzles")||[];this.completedPuzzles.length<PUZZLES.length;)this.completedPuzzles.push(null);this.drawUi(),this.updatePageLabel(),this.thumbnails=[[],[]],this.thumbnailPositions=[],this.thumbnails.forEach(function(t){for(var i,e;t.length<o.perPage;)i=t.length,e=o.currentPage*o.perPage+i,o.thumbnailPositions[i]={x:-(Thumbnail.SIZE+10)+i%3*(Thumbnail.SIZE+10),y:-(Thumbnail.SIZE+10)+Math.floor(i/3)*(Thumbnail.SIZE+10)},(i=new Thumbnail({position:{x:o.thumbnailPositions[i].x,y:o.thumbnailPositions[i].y}})).drawPreview(e,o.completedPuzzles[e]),o.add(i),t.push(i)}),this.thumbnails[1].forEach(function(t){t.position={x:t.position.x+o.size.width,y:t.position.y}}),this.activeThumbnailPage=0,this.currentPage===this.totalPages-1&&(this.nextButton.disabled=!0,this.nextButton.alpha=.5),0===this.currentPage&&(this.previousButton.disabled=!0,this.previousButton.alpha=.5),this.previousThumbnail=this.thumbnails[this.activeThumbnailPage][this.selectedPuzzle-this.currentPage*this.perPage],this.previousThumbnail.highlight()};(s.prototype=new Arcadia.Scene).next=function(){var t,o=-Arcadia.VIEWPORT_WIDTH,n=this;this.currentPage<this.totalPages-1&&(sona.play("button"),this.nextButton.disabled=!0,this.nextButton.alpha=.5,this.thumbnails[this.activeThumbnailPage].forEach(function(t,i){i=Math.floor(i/3)*s.TRANSITION_DELAY;window.setTimeout(function(){t.tween("position",{x:t.position.x+o,y:t.position.y},s.TRANSITION_DURATION,s.TRANSITION_TYPE)},i)}),this.currentPage+=1,this.activeThumbnailPage=1===this.activeThumbnailPage?0:1,this.thumbnails[this.activeThumbnailPage].forEach(function(t,i){var e;t.position={x:n.thumbnailPositions[i].x-o,y:t.position.y},e=n.currentPage*n.perPage+i,t.drawPreview(e,n.completedPuzzles[e]),i=Math.floor(i/3)*s.TRANSITION_DELAY+100,window.setTimeout(function(){t.tween("position",{x:t.position.x+o,y:t.position.y},s.TRANSITION_DURATION,s.TRANSITION_TYPE)},i)}),(t=this.thumbnails[this.activeThumbnailPage][0]).highlight(),this.previousThumbnail.lowlight(),this.previousThumbnail=t,this.selectedPuzzle=this.currentPage*this.perPage,this.updatePageLabel(),localStorage.setItem("selectedPuzzle",this.selectedPuzzle),window.setTimeout(function(){n.currentPage<n.totalPages-1&&(n.nextButton.disabled=!1,n.nextButton.alpha=1)},s.TOTAL_TRANSITION_DURATION),this.previousButton.alpha<1&&(this.previousButton.disabled=!1,this.previousButton.alpha=1))},s.prototype.previous=function(){var t,o=Arcadia.VIEWPORT_WIDTH,n=this;0<this.currentPage&&(sona.play("button"),this.previousButton.disabled=!0,this.previousButton.alpha=.5,this.thumbnails[this.activeThumbnailPage].forEach(function(t,i){i=Math.floor((n.perPage-i-1)/3)*s.TRANSITION_DELAY;window.setTimeout(function(){t.tween("position",{x:t.position.x+o,y:t.position.y},s.TRANSITION_DURATION,s.TRANSITION_TYPE)},i)}),--this.currentPage,this.activeThumbnailPage=1===this.activeThumbnailPage?0:1,this.thumbnails[this.activeThumbnailPage].forEach(function(t,i){var e;t.position={x:n.thumbnailPositions[i].x-o,y:t.position.y},e=n.currentPage*n.perPage+i,t.drawPreview(e,n.completedPuzzles[e]),i=Math.floor((n.perPage-i-1)/3)*s.TRANSITION_DELAY+100,window.setTimeout(function(){t.tween("position",{x:t.position.x+o,y:t.position.y},s.TRANSITION_DURATION,s.TRANSITION_TYPE)},i)}),(t=this.thumbnails[this.activeThumbnailPage][0]).highlight(),this.previousThumbnail.lowlight(),this.previousThumbnail=t,this.selectedPuzzle=this.currentPage*this.perPage,this.updatePageLabel(),localStorage.setItem("selectedPuzzle",this.selectedPuzzle),window.setTimeout(function(){0<n.currentPage&&(n.previousButton.disabled=!1,n.previousButton.alpha=1)},s.TOTAL_TRANSITION_DURATION),this.nextButton.alpha<1&&(this.nextButton.disabled=!1,this.nextButton.alpha=1))},s.prototype.updatePageLabel=function(){this.pageLabel.text="Page "+(this.currentPage+1)+" of "+this.totalPages,this.difficultyLabel.text="Size: "+PUZZLES[this.selectedPuzzle].size+"x"+PUZZLES[this.selectedPuzzle].size,this.completedLabel.text="Completed? "+(this.completedPuzzles[this.selectedPuzzle]?"✓":"✗")},s.prototype.onPointEnd=function(t){Arcadia.Scene.prototype.onPointEnd.call(this,t);var e=this,o={size:{width:1,height:1},position:t[0]};this.thumbnails[this.activeThumbnailPage].forEach(function(t,i){t.collidesWith(o)&&1===t.alpha&&(sona.play("button"),e.previousThumbnail.lowlight(),t.highlight(),e.previousThumbnail=t,e.selectedPuzzle=e.currentPage*e.perPage+i,localStorage.setItem("selectedPuzzle",e.selectedPuzzle),e.updatePageLabel())})},s.prototype.drawUi=function(){var t=this;this.pageLabel=new Arcadia.Label({position:{x:0,y:-145},font:"20px monospace"}),this.add(this.pageLabel),this.difficultyLabel=new Arcadia.Label({position:{x:0,y:150},font:"24px monospace"}),this.add(this.difficultyLabel),this.completedLabel=new Arcadia.Label({position:{x:0,y:180},font:"24px monospace"}),this.add(this.completedLabel);var i=new Arcadia.Button({position:{x:-this.size.width/2+65,y:-this.size.height/2+25},size:{width:120,height:40},color:null,border:"2px white",text:"< title",font:"24px monospace",action:function(){sona.play("button"),Arcadia.changeScene(TitleScene)}});this.add(i);i=new Arcadia.Button({position:{x:this.size.width/2-65,y:-this.size.height/2+25},size:{width:120,height:40},color:null,border:"2px white",text:"create",font:"24px monospace",action:function(){sona.play("button"),Arcadia.changeScene(EditorScene)}});this.add(i);i=new Arcadia.Label({text:"choose\npuzzle",font:"48px monospace",position:{x:0,y:-this.size.height/2+110}});this.add(i);i=new Arcadia.Button({position:{x:0,y:this.size.height/2-100},size:{width:180,height:50},color:null,border:"2px white",text:"play",font:"36px monospace",action:function(){sona.play("button"),Arcadia.isLocked()&&t.selectedPuzzle>=Arcadia.FREE_LEVEL_COUNT?Arcadia.changeScene(UnlockScene):Arcadia.changeScene(GameScene,{level:t.selectedPuzzle})}});this.add(i);i=new Arcadia.Button({position:{x:0,y:i.position.y+60},size:{width:180,height:50},color:null,border:"2px white",text:"edit",font:"36px monospace",action:function(){sona.play("button"),Arcadia.changeScene(EditorScene,{puzzleIndex:t.selectedPuzzle})}});this.add(i),this.previousButton=new Arcadia.Button({position:{x:-this.size.width/2+30,y:0},size:{width:50,height:50},border:"2px white",color:null,vertices:0,label:new Arcadia.Label({text:"<",font:"40px monospace"}),action:function(){t.previous()}}),this.nextButton=new Arcadia.Button({position:{x:this.size.width/2-30,y:0},size:{width:50,height:50},border:"2px white",color:null,vertices:0,label:new Arcadia.Label({text:">",font:"40px monospace"}),action:function(){t.next()}}),this.add(this.previousButton),this.add(this.nextButton)},s.TRANSITION_TYPE="cubicInOut",s.TRANSITION_DURATION=400,s.TRANSITION_DELAY=100,s.TOTAL_TRANSITION_DURATION=600,t.PuzzleSelectScene=s}(window),function(t){"use strict";function i(){Arcadia.Scene.apply(this),Arcadia.cycleBackground();var t=new Arcadia.Label({text:"rules",font:"64px monospace",position:{x:0,y:-this.size.height/2+110}});this.add(t),t=new Arcadia.Button({position:{x:-this.size.width/2+65,y:-this.size.height/2+25},size:{width:120,height:40},color:null,border:"2px white",text:"< title",font:"24px monospace",action:function(){window.sona.play("button"),Arcadia.changeScene(TitleScene)}}),this.add(t),t=new Arcadia.Label({text:`The goal of Akari is to
"light up" the entire
puzzle grid. A light
shines in four
directions, and you
can place as many as
you like. The only
limitation is the
numbered squares in the
grid. A square with a
"3" can only have three
lights in its adjacent
north, south, east, or
west spaces. And a
light can't shine on
another light.`,alignment:"left",font:"24px monospace",position:{x:0,y:75}}),this.add(t)}i.prototype=new Arcadia.Scene,t.RulesScene=i}(window),function(t){"use strict";function i(){Arcadia.Scene.apply(this),Arcadia.cycleBackground();var t=new Arcadia.Label({text:"akari\nmadness",font:"64px monospace",position:{x:0,y:-100}});this.add(t),t=new Arcadia.Button({position:{x:0,y:80},size:{width:180,height:50},color:null,border:"2px white",text:"play",font:"36px monospace",action:function(){window.sona.play("button");for(var t=localStorage.getObject("completedPuzzles")||[];t.length<PUZZLES.length;)t.push(null);var i=t.indexOf(null);-1===i?Arcadia.changeScene(PuzzleSelectScene):Arcadia.isLocked()&&i>=Arcadia.FREE_LEVEL_COUNT?Arcadia.changeScene(UnlockScene):Arcadia.changeScene(GameScene,{level:i})}}),this.add(t),t=new Arcadia.Button({position:{x:0,y:t.position.y+t.size.height+10},size:{width:180,height:50},color:null,border:"2px white",text:"rules",font:"36px monospace",action:function(){window.sona.play("button"),Arcadia.changeScene(RulesScene)}}),this.add(t),t=new Arcadia.Button({position:{x:0,y:t.position.y+t.size.height+10},size:{width:180,height:50},color:null,border:"2px white",text:"about",font:"36px monospace",action:function(){sona.play("button"),Arcadia.changeScene(AboutScene)}}),this.add(t),t=new Arcadia.Button({position:{x:0,y:t.position.y+t.size.height+10},size:{width:180,height:50},color:null,border:"2px white",text:"editor",font:"36px monospace",action:function(){sona.play("button"),Arcadia.changeScene(EditorScene)}}),this.add(t)}i.prototype=new Arcadia.Scene,t.TitleScene=i}(window);
//# sourceMappingURL=https://ganbarugames.com/akari/javascript